---
import { getTeamMembers } from "../../lib/API";
import type { TeamMember } from "../../lib/types";
import Base from "../../layouts/Base.astro";
import { documentToHtmlString } from "@contentful/rich-text-html-renderer";

export async function getStaticPaths() {
    const teamMembers: TeamMember[] = await getTeamMembers();
    return teamMembers.map((item) => ({
        params: {slug:item.slug},
        props: {
            slug: item.slug,
            name: item.name, 
            title: item.title, 
            info: item.info, 
            image: {
                url: item.image.url, 
                description: item.image.description
            },
        }
    }));
}

const { slug } = Astro.params;
const { name, title, info, image } = Astro.props;
---

<Base>
    <main>
        <article>
            <h1>{name}</h1>
            <h2>{title}</h2>
            <img src={image.url} alt={slug}>
            <p set:html={documentToHtmlString(info)} />
        </article>
    </main>
</Base>